(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{363:function(a,t,s){a.exports=s.p+"assets/img/img.7d5892ad.png"},364:function(a,t,s){a.exports=s.p+"assets/img/img_1.a96053d6.png"},436:function(a,t,s){"use strict";s.r(t);var r=s(21),e=Object(r.a)({},(function(){var a=this,t=a.$createElement,r=a._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[r("h2",{attrs:{id:"_4부-프로세스-이해하기"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4부-프로세스-이해하기"}},[a._v("#")]),a._v(" 4부 - 프로세스 이해하기")]),a._v(" "),r("h2",{attrs:{id:"_1-기본-방향"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_1-기본-방향"}},[a._v("#")]),a._v(" 1. 기본 방향")]),a._v(" "),r("ul",[r("li",[a._v("애플리케이션 최적화를 하기 위해서 프로세스의 동작 방식을 이해해야 한다.")]),a._v(" "),r("li",[a._v("프로세스 이해에 필요한 기본 지식으로 다음 세 가지가 있다.\n"),r("ul",[r("li",[r("strong",[a._v("수행 중인 코드")]),a._v(" : 프로세스가 현재 어떤 함수를 수행하고 있는가?")]),a._v(" "),r("li",[r("strong",[a._v("통신/파일 상태")]),a._v(" : 프로세스가 통신으로 연계된 서버는 어디고, 어떤 파일을 열고 있는가?")]),a._v(" "),r("li",[r("strong",[a._v("통신/파일 간 동작 상태")]),a._v(" : 연계 서버 또는 파일에 입출력이 얼마나 자주 그리고 오래 이루어지는가?")])])]),a._v(" "),r("li",[a._v("이번 장에서는 운영체제에서 제공하는 분석 명령어를 바탕으로 프로세스의 현재 상태와 동작을 이해하는 법과 개선 하는 방법을 습득한다.")])]),a._v(" "),r("h2",{attrs:{id:"_2-수행-중인-코드"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-수행-중인-코드"}},[a._v("#")]),a._v(" 2. 수행 중인 코드")]),a._v(" "),r("h3",{attrs:{id:"_2-1-스택에-대한-이해"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-스택에-대한-이해"}},[a._v("#")]),a._v(" 2.1 스택에 대한 이해")]),a._v(" "),r("ul",[r("li",[a._v("현재 수행 중인 프로그램이 코드 중 어디를 수행하고 있는지 알고 싶을 때는 해당 프로그램의 스택 정보를 획득하면 알 수 있다.")])]),a._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("leegisu"),r("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" jstack "),r("span",{pre:!0,attrs:{class:"token number"}},[a._v("12341")]),a._v("\n\nFull thread dump OpenJDK "),r("span",{pre:!0,attrs:{class:"token number"}},[a._v("64")]),a._v("-Bit Server VM "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),r("span",{pre:!0,attrs:{class:"token number"}},[a._v("11.0")]),a._v(".12+7-LTS mixed mode"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(":\n\n"),r("span",{pre:!0,attrs:{class:"token string"}},[a._v('"http-nio-8080-Acceptor"')]),a._v(" "),r("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#28 daemon prio=5 os_prio=31 cpu=0.55ms elapsed=23.70s tid=0x00007ff0a3232000 nid=0x14b03 runnable  [0x000000030b22f000]")]),a._v("\n   java.lang.Thread.State: RUNNABLE\n        at sun.nio.ch.ServerSocketChannelImpl.accept0"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("java.base@11.0.12/Native Method"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at sun.nio.ch.ServerSocketChannelImpl.accept"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("java.base@11.0.12/ServerSocketChannelImpl.java:533"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at sun.nio.ch.ServerSocketChannelImpl.accept"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("java.base@11.0.12/ServerSocketChannelImpl.java:285"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.tomcat.util.net.NioEndpoint.serverSocketAccept"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NioEndpoint.java:540"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.tomcat.util.net.NioEndpoint.serverSocketAccept"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("NioEndpoint.java:78"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at org.apache.tomcat.util.net.Acceptor.run"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("Acceptor.java:129"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n        at java.lang.Thread.run"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("java.base@11.0.12/Thread.java:829"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[a._v("1")]),r("br"),r("span",{staticClass:"line-number"},[a._v("2")]),r("br"),r("span",{staticClass:"line-number"},[a._v("3")]),r("br"),r("span",{staticClass:"line-number"},[a._v("4")]),r("br"),r("span",{staticClass:"line-number"},[a._v("5")]),r("br"),r("span",{staticClass:"line-number"},[a._v("6")]),r("br"),r("span",{staticClass:"line-number"},[a._v("7")]),r("br"),r("span",{staticClass:"line-number"},[a._v("8")]),r("br"),r("span",{staticClass:"line-number"},[a._v("9")]),r("br"),r("span",{staticClass:"line-number"},[a._v("10")]),r("br"),r("span",{staticClass:"line-number"},[a._v("11")]),r("br"),r("span",{staticClass:"line-number"},[a._v("12")]),r("br"),r("span",{staticClass:"line-number"},[a._v("13")]),r("br")])]),r("h3",{attrs:{id:"_2-2-스택-정보를-이용한-성능-분석"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-스택-정보를-이용한-성능-분석"}},[a._v("#")]),a._v(" 2.2 스택 정보를 이용한 성능 분석")]),a._v(" "),r("ul",[r("li",[a._v("스택 정보는 성능 저하나 멈춤 상태에서 프로세스를 분석하는 핵심 정보다.")])]),a._v(" "),r("h4",{attrs:{id:"_2-2-1-스택-대기-분석"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-1-스택-대기-분석"}},[a._v("#")]),a._v(" 2.2.1 스택 대기 분석")]),a._v(" "),r("ul",[r("li",[r("code",[a._v("- locked")]),a._v(" 면 락을 잡았다는 의미")]),a._v(" "),r("li",[r("code",[a._v("- waiting to lock")]),a._v(" 은 다른 스레드가 사용할 락을 잡고 있어 대기하고 있다는 의미")])]),a._v(" "),r("h4",{attrs:{id:"_2-2-2-교착상태"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-2-교착상태"}},[a._v("#")]),a._v(" 2.2.2 교착상태")]),a._v(" "),r("h4",{attrs:{id:"_2-2-3-스택-성능-분석"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-3-스택-성능-분석"}},[a._v("#")]),a._v(" 2.2.3 스택 성능 분석")]),a._v(" "),r("h3",{attrs:{id:"_2-3-스택-수집"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-스택-수집"}},[a._v("#")]),a._v(" 2.3 스택 수집")]),a._v(" "),r("ul",[r("li",[a._v("자바 프로그램의 스택 정보 수집")])]),a._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("jstack "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("pid"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" // "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("JDK "),r("span",{pre:!0,attrs:{class:"token environment constant"}},[a._v("HOME")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("/bin 디렉터리에 있음\n"),r("span",{pre:!0,attrs:{class:"token function"}},[a._v("kill")]),a._v(" -3 "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("pid"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(" // 표준 출력으로 스레드 덤프를 출력\n")])]),a._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[a._v("1")]),r("br"),r("span",{staticClass:"line-number"},[a._v("2")]),r("br")])]),r("ul",[r("li",[a._v("자바 힙 덤프 설정\n"),r("ul",[r("li",[a._v("자바 프로세스에서 아래와 같이 설정이 추가돼 있으면 "),r("code",[a._v("kill -3")]),a._v(" 시그널에서 힙 덤프가 생성된다.")])])])]),a._v(" "),r("div",{staticClass:"language-bash line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-bash"}},[r("code",[a._v("-XX:+HeapDumpOnCtrlBreak\n")])]),a._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[a._v("1")]),r("br")])]),r("h3",{attrs:{id:"_2-4-프로세스-스택-분석-도구"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-프로세스-스택-분석-도구"}},[a._v("#")]),a._v(" 2.4 프로세스 스택 분석 도구")]),a._v(" "),r("h4",{attrs:{id:"_2-4-1-환경설정"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-1-환경설정"}},[a._v("#")]),a._v(" 2.4.1 환경설정")]),a._v(" "),r("h4",{attrs:{id:"_2-4-2-주요-기능-설명"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-2-주요-기능-설명"}},[a._v("#")]),a._v(" 2.4.2 주요 기능 설명")]),a._v(" "),r("h4",{attrs:{id:"_2-4-3-sdpa를-이용한-성능-분석"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-3-sdpa를-이용한-성능-분석"}},[a._v("#")]),a._v(" 2.4.3 SDPA를 이용한 성능 분석")]),a._v(" "),r("h2",{attrs:{id:"_3-통신-파일-상태"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-통신-파일-상태"}},[a._v("#")]),a._v(" 3. 통신/파일 상태")]),a._v(" "),r("h3",{attrs:{id:"_3-1-파일-지시자의-이해"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-파일-지시자의-이해"}},[a._v("#")]),a._v(" 3.1 파일 지시자의 이해")]),a._v(" "),r("p",[r("img",{attrs:{src:s(363),alt:""}})]),a._v(" "),r("p",[r("img",{attrs:{src:s(364),alt:""}})]),a._v(" "),r("ul",[r("li",[a._v("유닉스와 리눅스는 소켓이나 파일을 사용할 때 파일 지시자(FD)라는 것을 사용한다.")]),a._v(" "),r("li",[a._v("유닉스에서 파일 지시자는 파일 뿐만 아니라 디렉토리, 디바이스, 파이프, 네트워크 소켓, 유닉스 도메인 소켓 등에 접근할 떄도 사용된다.")]),a._v(" "),r("li",[a._v("유닉스 프로세스 FD 상태 정보는 pfiles ,lsof 명령을 통해 조회할 수 있다.")])]),a._v(" "),r("h3",{attrs:{id:"_3-2-연계-통신-파일-상태-정보를-수집하는-방법"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-연계-통신-파일-상태-정보를-수집하는-방법"}},[a._v("#")]),a._v(" 3.2 연계 통신/파일 상태 정보를 수집하는 방법")]),a._v(" "),r("ul",[r("li",[r("code",[a._v("lsof -p [pid]")]),a._v(" 로 대상 프로세스의 상태를 조회할 수 있다.")])]),a._v(" "),r("h2",{attrs:{id:"_4-통신-파일-간-동작"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-통신-파일-간-동작"}},[a._v("#")]),a._v(" 4. 통신/파일 간 동작")]),a._v(" "),r("h3",{attrs:{id:"_4-1-시스템-콜에-대한-이해"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-시스템-콜에-대한-이해"}},[a._v("#")]),a._v(" 4.1 시스템 콜에 대한 이해")]),a._v(" "),r("ul",[r("li",[a._v("스택 정보와 통신/파일 상태 정보는 시점 정보이기 때문에 파일을 계속 열고 있지 않고 순간적으로 여닫는 경우는 잡히지 않을 수도 있다.")]),a._v(" "),r("li",[a._v("이러한 정보를 얻기 위해서는 시스템 콜을 모니터링 해야 한다.")]),a._v(" "),r("li",[a._v("유닉스나 리눅스는 C언어를 기반으로 개발되어 시스템 콜에 보이는 함수가 C로 개발된 시스템 라이브러리에서 제공되는 함수이다.")])]),a._v(" "),r("h3",{attrs:{id:"_4-2-통신-파일-상태와-동작-연계-분석"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-통신-파일-상태와-동작-연계-분석"}},[a._v("#")]),a._v(" 4.2 통신/파일 상태와 동작 연계 분석")]),a._v(" "),r("h3",{attrs:{id:"_4-3-스택-정보와-통신-파일-간-동작-연계-분석"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-3-스택-정보와-통신-파일-간-동작-연계-분석"}},[a._v("#")]),a._v(" 4.3 스택 정보와 통신/파일 간 동작 연계 분석")]),a._v(" "),r("h3",{attrs:{id:"_4-4-통신-파일-간-동작-모니터링-방법"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_4-4-통신-파일-간-동작-모니터링-방법"}},[a._v("#")]),a._v(" 4.4 통신/파일 간 동작 모니터링 방법")]),a._v(" "),r("h2",{attrs:{id:"_5-기타"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-기타"}},[a._v("#")]),a._v(" 5. 기타")]),a._v(" "),r("h3",{attrs:{id:"_5-1-프로그램-소스코드-보기"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-프로그램-소스코드-보기"}},[a._v("#")]),a._v(" 5.1 프로그램 소스코드 보기")]),a._v(" "),r("h3",{attrs:{id:"_5-2-바이너리-코어-덤프에서-자바-스택이나-힙-정보를-추출하는-방법"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-바이너리-코어-덤프에서-자바-스택이나-힙-정보를-추출하는-방법"}},[a._v("#")]),a._v(" 5.2 바이너리 코어 덤프에서 자바 스택이나 힙 정보를 추출하는 방법")]),a._v(" "),r("h3",{attrs:{id:"_5-3-프로세스의-현재-작업-디렉터리를-확인하는-법"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-프로세스의-현재-작업-디렉터리를-확인하는-법"}},[a._v("#")]),a._v(" 5.3 프로세스의 현재 작업 디렉터리를 확인하는 법")]),a._v(" "),r("h3",{attrs:{id:"_5-4-프로르램에서-사용하는-공유-라이브러리-확인"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-4-프로르램에서-사용하는-공유-라이브러리-확인"}},[a._v("#")]),a._v(" 5.4 프로르램에서 사용하는 공유 라이브러리 확인")]),a._v(" "),r("h3",{attrs:{id:"_5-5-프로세스-생성-관계-보기"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-5-프로세스-생성-관계-보기"}},[a._v("#")]),a._v(" 5.5 프로세스 생성 관계 보기")]),a._v(" "),r("h3",{attrs:{id:"_5-6-프로세스의-수행-환경-확인"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#_5-6-프로세스의-수행-환경-확인"}},[a._v("#")]),a._v(" 5.6 프로세스의 수행 환경 확인")])])}),[],!1,null,null,null);t.default=e.exports}}]);