<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Home | 끄적끄적 개발일지</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="https://www.googletagmanager.com/gtag/js?id=G-SE0BLFFFMG"></script>
    <meta name="description" content="Awesome description">
    
    <link rel="preload" href="/assets/css/0.styles.4bffb705.css" as="style"><link rel="preload" href="/assets/js/app.70752fd1.js" as="script"><link rel="preload" href="/assets/js/6.d4a6ae6d.js" as="script"><link rel="prefetch" href="/assets/js/10.1fe66b22.js"><link rel="prefetch" href="/assets/js/11.3e8e6dd5.js"><link rel="prefetch" href="/assets/js/12.96743d99.js"><link rel="prefetch" href="/assets/js/13.5cab9bdd.js"><link rel="prefetch" href="/assets/js/14.e412fb10.js"><link rel="prefetch" href="/assets/js/15.1da5e3dc.js"><link rel="prefetch" href="/assets/js/16.8ebbd2f8.js"><link rel="prefetch" href="/assets/js/17.4dcf5890.js"><link rel="prefetch" href="/assets/js/18.5bfa6a85.js"><link rel="prefetch" href="/assets/js/19.12bd999a.js"><link rel="prefetch" href="/assets/js/2.0c177ed1.js"><link rel="prefetch" href="/assets/js/20.87648ee0.js"><link rel="prefetch" href="/assets/js/21.7fbb071c.js"><link rel="prefetch" href="/assets/js/22.3f3676f6.js"><link rel="prefetch" href="/assets/js/23.114b4211.js"><link rel="prefetch" href="/assets/js/24.7077956a.js"><link rel="prefetch" href="/assets/js/25.42ad01f0.js"><link rel="prefetch" href="/assets/js/26.c356a4d4.js"><link rel="prefetch" href="/assets/js/27.52a125bd.js"><link rel="prefetch" href="/assets/js/28.692ecc68.js"><link rel="prefetch" href="/assets/js/29.d205c4cb.js"><link rel="prefetch" href="/assets/js/3.6ee8ed88.js"><link rel="prefetch" href="/assets/js/30.c221f26d.js"><link rel="prefetch" href="/assets/js/31.65e9c8ce.js"><link rel="prefetch" href="/assets/js/32.7ddfb0f5.js"><link rel="prefetch" href="/assets/js/33.7f74862d.js"><link rel="prefetch" href="/assets/js/34.21b19958.js"><link rel="prefetch" href="/assets/js/35.428cdea5.js"><link rel="prefetch" href="/assets/js/36.ef46a37e.js"><link rel="prefetch" href="/assets/js/37.290a8b87.js"><link rel="prefetch" href="/assets/js/38.61002123.js"><link rel="prefetch" href="/assets/js/39.fbbd1cce.js"><link rel="prefetch" href="/assets/js/4.39bb3471.js"><link rel="prefetch" href="/assets/js/40.ee500a11.js"><link rel="prefetch" href="/assets/js/41.ce50acc7.js"><link rel="prefetch" href="/assets/js/42.b0e56f29.js"><link rel="prefetch" href="/assets/js/43.c4683cd4.js"><link rel="prefetch" href="/assets/js/44.4fd9959c.js"><link rel="prefetch" href="/assets/js/45.10201422.js"><link rel="prefetch" href="/assets/js/5.6b61195e.js"><link rel="prefetch" href="/assets/js/7.8da69c67.js"><link rel="prefetch" href="/assets/js/8.8044f9c2.js"><link rel="prefetch" href="/assets/js/9.8e23472b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4bffb705.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-app="true" id="app" class="v-application v-application--is-ltr theme--light" style="background:#F3F5F7;"><div class="v-application--wrap"><div class="container pa-0" style="max-width:900px;"><link href="https://fonts.googleapis.com/css?family=Jura" rel="stylesheet"> <div class="text-center py-8 v-toolbar__title v-app-bar-title" style="font-family:'Jura';"><div class="v-app-bar-title__content"><h1 class="primary--text">끄적끄적 개발일지</h1></div><div class="v-app-bar-title__placeholder" style="visibility:visible;"><h1 class="primary--text">끄적끄적 개발일지</h1></div></div> <div role="list" class="v-list pa-0 v-sheet theme--light v-list--flat transparent"><div role="listbox" class="v-item-group theme--light v-list-item-group indigo--text"><div class="row mb-0 text-center no-gutters justify-center"><div class="col-lg-2 col"><a href="/" aria-current="page" tabindex="0" block="" text="" role="option" aria-selected="false" class="py-2  v-item--active v-list-item--active v-list-item v-list-item--link theme--light primary--text"><div class="v-list-item__title">Home</div></a></div> <div class="col-lg-2 col"><a href="/category" tabindex="0" block="" text="" role="option" aria-selected="false" class="py-2 v-list-item v-list-item--link theme--light primary--text"><div class="v-list-item__title">Category</div></a></div> <div class="col-lg-2 col"><a href="/profiles" tabindex="0" block="" text="" role="option" aria-selected="false" class="py-2 v-list-item v-list-item--link theme--light primary--text"><div class="v-list-item__title">Profiles</div></a></div></div></div></div> <hr role="separator" aria-orientation="horizontal" class="mb-3 v-divider theme--light"> <div><div><div class="px-0 col col-12"><div class="pa-5 px-md-7  v-card v-sheet theme--light elevation-1"><div><a href="/category/java/java-concurrency.html" class="text-h4 font-weight-bold"><div><!----></div>
          Java의 Concurrency 기법들
          <br></a> <span class="text-caption grey--text text--darken-1 ">2023-08-14 &gt; Java </span></div> <hr role="separator" aria-orientation="horizontal" class="mt-4 mb-4 v-divider theme--light"> <div class="theme-default-content custom post markdown-body mb-3"><h2 id="synchronized-락의-단점"><a class="header-anchor" href="#synchronized-락의-단점">#</a> synchronized 락의 단점</h2>
<ul>
<li>락이 걸린 객체에서 일어나는 동기화 작업은 모두 균등하게 취급된다.</li>
<li>락 획득/해제는 반드시 메서드 수준이나 메서드 내부의 동기화 블록 안에서 이루어져야 한다.</li>
<li>락을 얻지 못한 스레드는 블로킹된다. 락을 얻지 못할 경우, 락을 얻어 처리를 계속하려고 시도하는 것조차 불가능하다.</li>
</ul>
<p>락이 걸린 데이터에 모든 연산이 동등하게 취급된다는 의미는 읽기/쓰기 작업에 동일한 레벨의 락의 필요하다는 의미이다.</p>
<h2 id="java-동시성-라이브러리"><a class="header-anchor" href="#java-동시성-라이브러리">#</a> Java 동시성 라이브러리</h2>
<p>java.util.concurrent 패키지에는 멀티스레드 애플리케이션을 더 쉽게 개발할 수 있게 설계된 자바의 표준 라이브러리이다. 이 라이브러리에서 제공하는 기능은 크게 다음과 같다.</p>
<ul>
<li>락, 세마포어</li>
<li>atomics</li>
<li>Blocking Queue</li>
<li>latch</li>
<li>Executor</li>
</ul>
</div> <a href="/category/java/java-concurrency.html" class="font-weight-bold">Read more &gt;</a></div></div><div class="px-0 col col-12"><div class="pa-5 px-md-7  v-card v-sheet theme--light elevation-1"><div><a href="/category/database/mysql-primary-key-design.html" class="text-h4 font-weight-bold"><div><!----></div>
          고성능을 위한 MySQL Primary Key 설계 전략
          <br></a> <span class="text-caption grey--text text--darken-1 ">2023-08-06 &gt; 데이터베이스 </span></div> <hr role="separator" aria-orientation="horizontal" class="mt-4 mb-4 v-divider theme--light"> <div class="theme-default-content custom post markdown-body mb-3"><h2 id="primary-key-설계의-중요성"><a class="header-anchor" href="#primary-key-설계의-중요성">#</a> Primary Key 설계의 중요성</h2>
<p>InnoDB 기준으로 MySQL은 Primary Key를 기준으로 데이터를 클러스터링한다.
클러스터링이라는 용어는 인접한 키 값이 있는 레코드가 물리적으로도 인접하게 저장된다는 것을 말한다.
즉, 논리적인 PK 값에 의해 레코드의 물리적인 위치가 결정된다.
PK값이 변경된다면 해당 레코드의 물리적인 위치도 변경된다는 얘기다.</p>
<p>모든 데이터베이스가 마찬가지겠지만 MySQL의 PK 설계는 다른 데이터베이스보다 더 중요하다고 볼 수 있다.
왜냐하면, 일부 데이터베이스에서는 클러스터링할 인덱스를 선택할 수 있지만 MySQL은 기본키로 고정되어 변경할 수 없다. (MySQL 8.x 기준)<br>
또한, MySQL은 Secondary Index의 Leaf Node에 오라클과 같이 물리적 위치에 대한 참조(ROWID)가 아닌 PK 값을 저장하고, PK 인덱스를 통해 실제 디스크 블록에 접근한다. 따라서, MySQL에서 PK 는 단순히 데이터를 식별하기 위한 식별자 역할뿐만 아니라 내부 구현에도 관여하기 때문에 그 중요성은 매우 크다고 볼 수 있다.</p>
<h2 id="클러스터형-인덱스"><a class="header-anchor" href="#클러스터형-인덱스">#</a> 클러스터형 인덱스</h2>
<p>고성능을 위한 Primary Key 를 설계하기 위해서는 Primary Key 의 저장 구조인 클러스터형 인덱스에 대한 이해가 필요하다.
아래의 그림은 Secondary Index <strong>(Non-Clusted Index)</strong> 와 Primary Key Index <strong>(Clusted Index)</strong> 의 저장 구조를 나타낸다.</p>
<p>Secondary Index <strong>(Non-Clusted Index)</strong> 그림의 리프 노드를 보면 Index Key 값에 해당 하는 Primary Key 값을 저장하고 있는 것을 볼 수 있다.
Index Key 값은 정렬되어 있지만 Index Key 값에 맵핑되는 Primary Key들 사이에는 아무런 순서관계가 없다.</p>
<p>Primary Key Index <strong>(Clusted Index)</strong> 그림의 리프 노드는 Index Key 값 기준으로 정렬되어 있고,
참조가 아닌 실제 레코드를 저장하는 페이지가 리프노드에 위치해 있다. 페이지 내에서도 Primary Index Key 값 기준으로 레코드가 물리적으로 정렬되어 있다.</p>
</div> <a href="/category/database/mysql-primary-key-design.html" class="font-weight-bold">Read more &gt;</a></div></div><div class="px-0 col col-12"><div class="pa-5 px-md-7  v-card v-sheet theme--light elevation-1"><div><a href="/category/java_spring/ehcache3.html" class="text-h4 font-weight-bold"><div><!----></div>
          Ehcache3 캐시 라이브러리 소개 (with Spring Boot)
          <br></a> <span class="text-caption grey--text text--darken-1 ">2023-07-24 &gt; 스프링 </span></div> <hr role="separator" aria-orientation="horizontal" class="mt-4 mb-4 v-divider theme--light"> <div class="theme-default-content custom post markdown-body mb-3"><h2 id="spring-boot2-ehcache3"><a class="header-anchor" href="#spring-boot2-ehcache3">#</a> Spring Boot2 + Ehcache3</h2>
<p>Spring Cache Abstract 와 Ehcache3 모듈 설정 방법을 알아본다.</p>
<h2 id="gradle-dependency-설정"><a class="header-anchor" href="#gradle-dependency-설정">#</a> Gradle Dependency 설정</h2>
<!--beforebegin--><div class="language- line-numbers-mode"><!--afterbegin--><pre v-pre class="language-text"><code>implementation(&quot;org.springframework.boot:spring-boot-starter-cache&quot;)
implementation(&quot;org.ehcache:ehcache:3.9.5&quot;)
implementation(&quot;javax.cache:cache-api:1.1.1&quot;)
</code></pre>
<div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div><!--beforeend--></div><!--afterend--><h2 id="캐시-구성"><a class="header-anchor" href="#캐시-구성">#</a> 캐시 구성</h2>
<p>Ehcache3 버전부터는 JSR-107을 자바 표준 인터페이스를 구현하였다.
캐시에 대한 자바 표준 인터페이스를 JCache 라고 한다.
JPA 구현체에 Hibernate 와 EclipseLink 등이 있는 것 처럼 JCache 구현체 중 하나가 Ehcache3 이다.</p>
</div> <a href="/category/java_spring/ehcache3.html" class="font-weight-bold">Read more &gt;</a></div></div><div class="px-0 col col-12"><div class="pa-5 px-md-7  v-card v-sheet theme--light elevation-1"><div><a href="/category/jpa/jpa-slow-cause.html" class="text-h4 font-weight-bold"><div><!----></div>
          JPA가 느릴 수 밖에 없는 원초적인 이유
          <br></a> <span class="text-caption grey--text text--darken-1 ">2023-07-21 &gt; JPA </span></div> <hr role="separator" aria-orientation="horizontal" class="mt-4 mb-4 v-divider theme--light"> <div class="theme-default-content custom post markdown-body mb-3"><h2 id="n-1-쿼리는-무엇을-의마하나"><a class="header-anchor" href="#n-1-쿼리는-무엇을-의마하나">#</a> N+1 쿼리는 무엇을 의마하나?</h2>
<p>JPA의 한계를 설명하기 위해서는 N+1 쿼리가 발생하는 원초적인 원인에 대해 이해하는 것이 필요하다.<br>
JPA를 사용하다보면 N+1 쿼리를 경험할 수 있는데, 기술적인 방법으로 N+1 쿼리를 해결하는 게시물은 많지만, 왜 이러한 쿼리가 발생하는지에 대해 정확히 설명하는 블로그는 찾기 어렵다.<br>
본 포스팅에서는 N+1 쿼리가 발생하는 원인을 설명하고, 이로 인해 JPA가 성능상 한계에 부딪힐 수밖에 없는 이유에 대해 설명하려고 한다.</p>
</div> <a href="/category/jpa/jpa-slow-cause.html" class="font-weight-bold">Read more &gt;</a></div></div><div class="px-0 col col-12"><div class="pa-5 px-md-7  v-card v-sheet theme--light elevation-1"><div><a href="/category/redis/redis-event-notifications.html" class="text-h4 font-weight-bold"><div><!----></div>
          Redis Keyspace Notifications에 대해 알아보자
          <br></a> <span class="text-caption grey--text text--darken-1 ">2023-07-19 &gt; 레디스 </span></div> <hr role="separator" aria-orientation="horizontal" class="mt-4 mb-4 v-divider theme--light"> <div class="theme-default-content custom post markdown-body mb-3"><h2 id="redis-keyspace-notifications"><a class="header-anchor" href="#redis-keyspace-notifications">#</a> Redis Keyspace Notifications</h2>
<p>Redis에는 키 및 값의 변경 사항을 실시간으로 수신할 수 있는 Pub/Sub 기능을 제공한다.</p>
<h2 id="notifications-유형"><a class="header-anchor" href="#notifications-유형">#</a> Notifications 유형</h2>
<p>Redis 데이터 공간에 영향을 미치는 모든 작업에 대해 다음 두 가지 유형의 이벤트가 발생된다.
예를 들어 키를 삭제하는 명령인 <code>del myKey1</code> 이 실행되면 Redis는 다음 두 가지 명령이 트리거된다.</p>
<!--beforebegin--><div class="language-redis line-numbers-mode"><!--afterbegin--><pre v-pre class="language-text"><code>PUBLISH __keyspace@0__:mykey1 del
PUBLISH __keyevent@0__:del mykey1
</code></pre>
<div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div><!--beforeend--></div><!--afterend--><p>첫번째 PUBLISH 명령은 Key 중심 이벤트로, <code>del</code>이 이벤트의 메시지고
두번쨰 PUBLISH 명령은 명령 중심 이벤트로, <code>myKey1</code>이 이벤트의 메시지이다.
Sub 하는 쪽에서는 Subscribe 패턴 매칭을 통해서 두 가지 유형 중 관심있는 이벤트만 선택해서 알림을 받을 수 있다.</p>
</div> <a href="/category/redis/redis-event-notifications.html" class="font-weight-bold">Read more &gt;</a></div></div> <br> <div class="row py-5 px-15 justify-center"><button type="button" class="grey--text text--darken-1 v-btn v-btn--block v-btn--is-elevated v-btn--has-bg v-btn--rounded theme--light elevation-1 v-size--default white"><span class="v-btn__content">↓    더 보기
    </span></button></div></div></div></div> <footer prime="" class="v-footer mt-2 v-sheet theme--light v-footer--padless" style="background:#F3F5F7;"><div class="col col-12"><div class="text-center v-card v-card--flat v-sheet theme--light rounded-0" style="background:#F3F5F7;"><div class="v-card__text"><p>Copyright © 2021 All Right <em>끄적끄적 개발일지</em></p> <p>
          px201226@gmail.com .
          <a href="https://github.com/px201226" target="_blank">GitHub</a>
          .
          <a href="http://px201226.github.io/blog" target="_blank">Blog</a>
          .
        </p></div></div></div></footer></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.70752fd1.js" defer></script><script src="/assets/js/6.d4a6ae6d.js" defer></script>
  </body>
</html>
