<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1부 - 성능 기초 | 끄적끄적 개발일지</title>
    <meta name="generator" content="VuePress 1.8.2">
    <script src="https://www.googletagmanager.com/gtag/js?id=G-SE0BLFFFMG"></script>
    <meta name="description" content="Awesome description">
    
    <link rel="preload" href="/assets/css/0.styles.4bffb705.css" as="style"><link rel="preload" href="/assets/js/app.70752fd1.js" as="script"><link rel="preload" href="/assets/js/17.4dcf5890.js" as="script"><link rel="preload" href="/assets/js/40.ee500a11.js" as="script"><link rel="prefetch" href="/assets/js/10.1fe66b22.js"><link rel="prefetch" href="/assets/js/11.3e8e6dd5.js"><link rel="prefetch" href="/assets/js/12.96743d99.js"><link rel="prefetch" href="/assets/js/13.5cab9bdd.js"><link rel="prefetch" href="/assets/js/14.e412fb10.js"><link rel="prefetch" href="/assets/js/15.1da5e3dc.js"><link rel="prefetch" href="/assets/js/16.8ebbd2f8.js"><link rel="prefetch" href="/assets/js/18.5bfa6a85.js"><link rel="prefetch" href="/assets/js/19.12bd999a.js"><link rel="prefetch" href="/assets/js/2.0c177ed1.js"><link rel="prefetch" href="/assets/js/20.87648ee0.js"><link rel="prefetch" href="/assets/js/21.7fbb071c.js"><link rel="prefetch" href="/assets/js/22.3f3676f6.js"><link rel="prefetch" href="/assets/js/23.114b4211.js"><link rel="prefetch" href="/assets/js/24.7077956a.js"><link rel="prefetch" href="/assets/js/25.42ad01f0.js"><link rel="prefetch" href="/assets/js/26.c356a4d4.js"><link rel="prefetch" href="/assets/js/27.52a125bd.js"><link rel="prefetch" href="/assets/js/28.692ecc68.js"><link rel="prefetch" href="/assets/js/29.d205c4cb.js"><link rel="prefetch" href="/assets/js/3.6ee8ed88.js"><link rel="prefetch" href="/assets/js/30.c221f26d.js"><link rel="prefetch" href="/assets/js/31.65e9c8ce.js"><link rel="prefetch" href="/assets/js/32.7ddfb0f5.js"><link rel="prefetch" href="/assets/js/33.7f74862d.js"><link rel="prefetch" href="/assets/js/34.21b19958.js"><link rel="prefetch" href="/assets/js/35.428cdea5.js"><link rel="prefetch" href="/assets/js/36.ef46a37e.js"><link rel="prefetch" href="/assets/js/37.290a8b87.js"><link rel="prefetch" href="/assets/js/38.61002123.js"><link rel="prefetch" href="/assets/js/39.fbbd1cce.js"><link rel="prefetch" href="/assets/js/4.39bb3471.js"><link rel="prefetch" href="/assets/js/41.ce50acc7.js"><link rel="prefetch" href="/assets/js/42.b0e56f29.js"><link rel="prefetch" href="/assets/js/43.c4683cd4.js"><link rel="prefetch" href="/assets/js/44.4fd9959c.js"><link rel="prefetch" href="/assets/js/45.10201422.js"><link rel="prefetch" href="/assets/js/5.6b61195e.js"><link rel="prefetch" href="/assets/js/6.d4a6ae6d.js"><link rel="prefetch" href="/assets/js/7.8da69c67.js"><link rel="prefetch" href="/assets/js/8.8044f9c2.js"><link rel="prefetch" href="/assets/js/9.8e23472b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4bffb705.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div data-app="true" id="app" class="v-application v-application--is-ltr theme--light" style="background:#F3F5F7;"><div class="v-application--wrap"><div class="container pa-0" style="max-width:900px;"><link href="https://fonts.googleapis.com/css?family=Jura" rel="stylesheet"> <div class="text-center py-8 v-toolbar__title v-app-bar-title" style="font-family:'Jura';"><div class="v-app-bar-title__content"><h1 class="primary--text">끄적끄적 개발일지</h1></div><div class="v-app-bar-title__placeholder" style="visibility:visible;"><h1 class="primary--text">끄적끄적 개발일지</h1></div></div> <div role="list" class="v-list pa-0 v-sheet theme--light v-list--flat transparent"><div role="listbox" class="v-item-group theme--light v-list-item-group indigo--text"><div class="row mb-0 text-center no-gutters justify-center"><div class="col-lg-2 col"><a href="/" tabindex="0" block="" text="" role="option" aria-selected="false" class="py-2  v-list-item v-list-item--link theme--light primary--text"><div class="v-list-item__title">Home</div></a></div> <div class="col-lg-2 col"><a href="/category" aria-current="page" tabindex="0" block="" text="" role="option" aria-selected="false" class="py-2 v-item--active v-list-item--active v-list-item v-list-item--link theme--light primary--text"><div class="v-list-item__title">Category</div></a></div> <div class="col-lg-2 col"><a href="/profiles" tabindex="0" block="" text="" role="option" aria-selected="false" class="py-2 v-list-item v-list-item--link theme--light primary--text"><div class="v-list-item__title">Profiles</div></a></div></div></div></div> <hr role="separator" aria-orientation="horizontal" class="mb-3 v-divider theme--light"> <div><div data-v-52bca676><div class="px-0 col col-12" data-v-52bca676 data-v-52bca676><div class="pa-5 px-md-7 v-card v-sheet theme--light elevation-1" data-v-52bca676><div data-v-52bca676><a href="/category/learn-tuning/ch1.html" aria-current="page" class="text-h4 font-weight-bold router-link-exact-active router-link-active" data-v-52bca676><div data-v-52bca676><!----></div>
          1부 - 성능 기초
        </a> <br data-v-52bca676> <span class="text-caption grey--text text--darken-1 " data-v-52bca676>2022-02-03 &gt; 실무로 배우는 시스템 성능 최적화
        </span></div> <hr role="separator" aria-orientation="horizontal" class="mt-4 mb-4 v-divider theme--light" data-v-52bca676> <div class="theme-container" data-v-52bca676><div class="toc" data-v-52bca676><ul><li><a href="/category/learn-tuning/ch1.html#_1-성능이란">1. 성능이란?</a><ul><li><a href="/category/learn-tuning/ch1.html#_1-1-동시-사용자">1.1 동시 사용자</a></li><li><a href="/category/learn-tuning/ch1.html#_1-2-처리량">1.2 처리량</a></li><li><a href="/category/learn-tuning/ch1.html#_1-3-응답시간">1.3 응답시간</a></li><li><a href="/category/learn-tuning/ch1.html#_1-4-자원">1.4 자원</a></li></ul></li><li><a href="/category/learn-tuning/ch1.html#_2-성능-특성">2. 성능 특성</a><ul><li><a href="/category/learn-tuning/ch1.html#_2-1-성능-곡선">2.1 성능 곡선</a></li><li><a href="/category/learn-tuning/ch1.html#_2-2-성능에-대한-이해">2.2 성능에 대한 이해</a></li></ul></li><li><a href="/category/learn-tuning/ch1.html#_3-성능-이론">3. 성능 이론</a><ul><li><a href="/category/learn-tuning/ch1.html#_3-1-기초-성능-이론">3.1 기초 성능 이론</a></li><li><a href="/category/learn-tuning/ch1.html#_3-2-사용률-이론">3.2 사용률 이론</a></li><li><a href="/category/learn-tuning/ch1.html#_3-3-비율-분석">3.3 비율 분석</a></li></ul></li><li><a href="/category/learn-tuning/ch1.html#_4-성능-테스트">4. 성능 테스트</a><ul><li><a href="/category/learn-tuning/ch1.html#_4-1-성능-테스트-유형">4.1. 성능 테스트 유형</a></li><li><a href="/category/learn-tuning/ch1.html#_4-2-성능-테스트-구성-요소">4.2 성능 테스트 구성 요소</a></li><li><a href="/category/learn-tuning/ch1.html#_4-3-성능-테스트-시-주의사항">4.3 성능 테스트 시 주의사항</a></li></ul></li></ul></div> <div class="theme-default-content custom post markdown-body content__default" data-v-52bca676><h2 id="_1-성능이란"><a href="#_1-성능이란" class="header-anchor">#</a> 1. 성능이란?</h2> <ul><li>고객의 특정 업무를 대상으로 운영환경하에서 고객이 수긍할 수 있는 응답시간 내에 처리할 수 있는 거래량이라고 정의할 수 있다.</li></ul> <h3 id="_1-1-동시-사용자"><a href="#_1-1-동시-사용자" class="header-anchor">#</a> 1.1 동시 사용자</h3> <ul><li>성능 테스트나 운영 시 시스템에 발생하는 부하의 의미로 많이 사용되는 용어가 바로 동시 사용자다.</li> <li>동시 사용자에 대한 정의는 개발자와 업무담당자간에 다르게 해석할 수 있다.
<ul><li>동시에 시스템에 트랜잭션을 유발시키는 사용자</li> <li>시스템과 접속을 유지하고 있는 사용자 수</li></ul></li> <li>동시 사용자 수 = 요청 사용자 수 + 비요청 사용자 수</li></ul> <h3 id="_1-2-처리량"><a href="#_1-2-처리량" class="header-anchor">#</a> 1.2 처리량</h3> <ul><li>처리량은 서버가 일정 시간 내에 처리한 트랜잭션의 양이다.</li> <li>서버가 인식하는 트랜잭션 양과 사용자가 인식하는 트랜젹션 양은 다르다.
<ul><li>고객 입장에서는 화면 조회라는 1개의 트랜잭션을 보낸다.</li> <li>서버 입장에서는 API, DB, 웹 등 여러 쿼리 호출이 발생한다.</li></ul></li> <li>성능에서 중요한건 고객의 업무를 얼마나 빨리 처리할 수 있는가다.</li> <li>따라서 처리량의 평가 단위로서 TPS(Transaction Per Second)의 T는 고객의 업무 처리 건수가 되는 것이 의사소통이나 평가 하는데 적합하다.</li></ul> <h3 id="_1-3-응답시간"><a href="#_1-3-응답시간" class="header-anchor">#</a> 1.3 응답시간</h3> <ul><li>응답시간은 요청한 후부터 응답을 받을 때까지 소요된 시간으로 츠겆ㅇ하는 위치에 따라 여러 유형으로 나뉜다.
<ul><li>클라이언트 응답 시간
<ul><li>사용자가 요청한 후 부터 화면에 응답이 나타날 때까지 경과된 시간, 클라이언트 내부 처리시간도 포함된다.</li></ul></li> <li>네트워크 응답 시간
<ul><li>클라이언트에서 요청이 네트워크로 전송된 후부터 응답이 클라이언트 네트워크에 도착하는 데까지 경과되는 시간을 으미한다.</li></ul></li> <li>서버 응답 시간
<ul><li>서버가 사용자 요청을 받은 후 부터 처리 결과를 내보는는 데까지 경과된 응답시간이다. APM 기반으로 측정하는 경우가 여기에 해당된다.</li></ul></li> <li>연계 응답 시간
<ul><li>서버 처리 중 외부 시스템과 연계해서 처리할 경우 연계 서버에 요청을 보내 응답을 받기까지 경과된 시간이다.</li></ul></li></ul></li> <li>응답시간을 산술 평균으로 계산한다면 정확한 분석이 어려워 보통 백분율 응답시간을 사용한다.
<ul><li>측정시간 동안 200개의 트랜잭션이 발생했고, 가장 응답시간이 빠른 것부터 줄세워 180등을 기록한 트랜잭션의 응답시간이 3.5였다면, 해당 업무의 90% 응답시간은 3.5초가 된다. <code>p90</code></li></ul></li></ul> <h3 id="_1-4-자원"><a href="#_1-4-자원" class="header-anchor">#</a> 1.4 자원</h3> <ul><li>서버의 CPU, 메모리, 디스크, 네트워크, WAS의 스레드 풀, DB연결 풀, 힙 메모리, 프로세스 수, 오픈 가능한 커서 수, 공유 캐시 메모리 등 물리적인 자원부터 소프트웨어 설정값까지 다양한 자원이 있다.</li> <li>성능 측면에서 자원은 한정된 값을 가진 시스템 구성 요소 중 애플리케이션이 동작할 때 사용하며, <code>부족한 경우 나 사용량 변화에 따라 성능에 영향을 미치는 요소</code>를 의미한다.</li></ul> <h4 id="_1-4-1-적정성"><a href="#_1-4-1-적정성" class="header-anchor">#</a> 1.4.1 적정성</h4> <ul><li>자원 사용량에 대한 목표 달성과 부족 여부를 확인하는 것이다.</li> <li>자원이 부족한 경우 경함과 대기가 발생해 성능이 저하되므로 늘려줘야 하지만 다른 자원에 악영향을 주어 개선 효과를 보지 못할 수도 있다.</li></ul> <h4 id="_1-4-2-효율성"><a href="#_1-4-2-효율성" class="header-anchor">#</a> 1.4.2 효율성</h4> <ul><li>동일한 TPS를 기준으로 할 때 CPU나 메모리를 적게 사용하는 시스템이 효율적으로 작업을 수행한 것 이다.</li> <li>DB 사용량을 줄이고 애플리케이션 코드의 수행시간을 줄여 시스템 자원을 더 적게 사용하도록 개선함으로써 효율성을 높인다.</li></ul> <h4 id="_1-4-3-안정성"><a href="#_1-4-3-안정성" class="header-anchor">#</a> 1.4.3 안정성</h4> <ul><li>시스템 운영시간이 지남에 따라 성능이 저하되거나 장애가 발생하는 등의 문제가 발생하지 않아야 한다.</li></ul> <h4 id="_1-4-4-가용성"><a href="#_1-4-4-가용성" class="header-anchor">#</a> 1.4.4 가용성</h4> <ul><li>일정 기간 동안 시스템이 정상적으로 서비스된 시간 비율을 의미한다.</li> <li>카드 승인 시스템 같은 시스템은 장애는 사업 기회의 손실로 이어지므로 100%에 가까운 가용성을 유지해야 한다.</li></ul> <h4 id="_1-4-5-확장성"><a href="#_1-4-5-확장성" class="header-anchor">#</a> 1.4.5 확장성</h4> <ul><li>확장성은 향후 시스템 사용량 증가에 따라 시스템 증설이 필요할 때 각 자원이 얼마나 용이하게 증설될 수 있는가를 평가하는 것 이다.</li></ul> <h2 id="_2-성능-특성"><a href="#_2-성능-특성" class="header-anchor">#</a> 2. 성능 특성</h2> <h3 id="_2-1-성능-곡선"><a href="#_2-1-성능-곡선" class="header-anchor">#</a> 2.1 성능 곡선</h3> <h3 id="_2-2-성능에-대한-이해"><a href="#_2-2-성능에-대한-이해" class="header-anchor">#</a> 2.2 성능에 대한 이해</h3> <ul><li>성능은 업무와 시스템 특성에 따라 다르게 나타난다.
<ul><li>시스템에 A,B 두 업무가 있다고 가정할 때 각 업무의 비중이 10%,90% 일 때와 90%,10% 일 때 시스템의 최대 성능과 응답시간이 다를 것이다.</li> <li>따라서 시스템의 성능을 이야기할 때는 업무의 고유한 특성과 시나리오하에서만 논의할 수 있다.</li></ul></li> <li>모든 시스템에 일괄 적용할 수 있는 응답시간 기준은 없고 100% 만족시킬 수도 없다.
<ul><li>화면 구성이 비슷하더라도 업무의 성격에 따라 처리하는 데이터의 양과 로직의 복잡도가 달라진다.</li></ul></li> <li>동시 사용자 수가 시스템 성능을 의미하는 것은 아니다.
<ul><li>웹 기반 시스템에서는 동시 사용자(접속자) 수 보다 초당 들어오는 요청의 수, 웹 서버에 물리적으로 맺어진 네트워크 연결 수가 성능에 더 큰 영향을 준다.</li></ul></li> <li>시스템 성능은 비용과 수익으로 평가할 수도 있다.
<ul><li>시스템 자원 부족으로 서버를 추가 도입하거나 부족한 자원을 증설하기 위해서는 비용이 든다.</li></ul></li></ul> <h2 id="_3-성능-이론"><a href="#_3-성능-이론" class="header-anchor">#</a> 3. 성능 이론</h2> <h3 id="_3-1-기초-성능-이론"><a href="#_3-1-기초-성능-이론" class="header-anchor">#</a> 3.1 기초 성능 이론</h3> <h3 id="_3-2-사용률-이론"><a href="#_3-2-사용률-이론" class="header-anchor">#</a> 3.2 사용률 이론</h3> <h3 id="_3-3-비율-분석"><a href="#_3-3-비율-분석" class="header-anchor">#</a> 3.3 비율 분석</h3> <h2 id="_4-성능-테스트"><a href="#_4-성능-테스트" class="header-anchor">#</a> 4. 성능 테스트</h2> <h3 id="_4-1-성능-테스트-유형"><a href="#_4-1-성능-테스트-유형" class="header-anchor">#</a> 4.1. 성능 테스트 유형</h3> <h3 id="_4-2-성능-테스트-구성-요소"><a href="#_4-2-성능-테스트-구성-요소" class="header-anchor">#</a> 4.2 성능 테스트 구성 요소</h3> <h3 id="_4-3-성능-테스트-시-주의사항"><a href="#_4-3-성능-테스트-시-주의사항" class="header-anchor">#</a> 4.3 성능 테스트 시 주의사항</h3> <ul><li>성능 테스트는 통상 제약된 환경에서 테스트하므로 실제 운영 시스템 대상으로 테스트를 진행했더라도 운영에 들어가면 예상치 못한 장애가 발생하기도 한다.</li></ul> <h4 id="_4-3-1-테스트-데이터"><a href="#_4-3-1-테스트-데이터" class="header-anchor">#</a> 4.3.1 테스트 데이터</h4> <ul><li>테스트 데이터에 따라 확연히 다른 결과가 나오는 경우도 많기 때문에 성능 테스트 시에는 테스트 데이터에 대해 다음과 같은 사항을 고려해야 한다.
<ul><li><strong>시스템 데이터(데이터 대상 DB)</strong> <ul><li>통상 전체 성능의 70% 이상이 DB에 자우되는데, 테스트 대상이 되는 테이블의 데이터 양이나 패턴이 다르면 쿼리의 실행계획이 달라져 성능이 다르게 나타난다.</li> <li>데이터가 소량이면 실제 디스크 입출력이 일어나야 하는데 모두 메모리에 로드되어 성능이 빠른 것으로 착각할 수 있다.</li> <li>원칙적으로 성능 테스트는 실 데이터가 전환된 데이터베이스를 대상으로 수행해야 한다.</li></ul></li> <li><strong>스크립트 데이터(입력용 데이터)</strong> <ul><li>소량의 스크립트 데이터를 사용한 경우 테스트 초기 입력 데이터가 DB에 메모리에 캐시됨으로써 성능이 좋게 나올 수 있다.</li></ul></li> <li><strong>초기 데이터 제로 테이블</strong> <ul><li>시스템을 오픈할 때 비어있는 테이블은 시간이 지나면서 성능 문제를 일으키는 경우가 많다.</li> <li>초기 건수가 0이지만 운영하면서 건수가 큰 폭으로 증가하는 테이블은 데이터가 쌓여있을 때의 통계정보로 테이블 통계정보를 변경해 달라고 요청해야 한다.</li></ul></li></ul></li></ul> <h4 id="_4-3-2-화면-처리시간"><a href="#_4-3-2-화면-처리시간" class="header-anchor">#</a> 4.3.2 화면 처리시간</h4> <ul><li>대부분의 성능 테스트 도구는 클라이언트 측 네트워크 시간을 기준으로 응답시간을 측정한다.</li> <li>클라이언트마다 PC 환경이 다르고, 테스트 환경에서는 클라이언트에서 수행되는 로직이 동작할 경우 CPU 등 자원부족으로 성능 측정이 부정확하게 되기 때문이다.</li> <li>중요 화면에 대해서는 화면 응답시간을 측정해 성능 기준 만족 여부를 평가하고, 서버 처리시간과 비교 분석해 클라이언트 성능 개선이 필요한지 여부를 판단한다.</li></ul> <h4 id="_4-3-3-네트워크"><a href="#_4-3-3-네트워크" class="header-anchor">#</a> 4.3.3 네트워크</h4> <ul><li>성능 테스트 시 부하 발생기가 연결돼 있는 스위치를 바로 백본 스위치에 연결해 테스트를 수행하는 경우가 많다.</li> <li>이는 내부 네트워크와 서버 중심으로 처리시간을 측정하고, 외부 네트워크는 제외하는 것 이다.</li> <li>서버 문제가 없음에도 네트워크 지연으로 애플리케이션 종료가 지연되어 작업 프로세스나 스레드 풀이 소진되어 큐잉이 발생함으로써 전체 사용자가 성능 저하를 경함할 수 있다.</li></ul> <h4 id="_4-3-4-가상-사용자-특성"><a href="#_4-3-4-가상-사용자-특성" class="header-anchor">#</a> 4.3.4 가상 사용자 특성</h4> <ul><li>실사용자라면 응답이 20~30초씩만 늦어져도 기다리지 못하고 다시 반복요청한다.</li> <li>즉 성능 테스트하에서는 특정 가상 사용자 수 이상 큐잉이 발생할 가능성은 낮지만 운영 환경에서는 동일 사용자에 의한 서비스 반복 요청이 이뤄져 대량의 큐잉이 발생할 수 있다.</li> <li>테스트 환경에서만 발생하는 패턴임에도 실제 환경에서도 발생하는 패턴으로 인식해버릴 수도 있다.</li></ul> <h4 id="_4-3-5-업무-시나리오"><a href="#_4-3-5-업무-시나리오" class="header-anchor">#</a> 4.3.5 업무 시나리오</h4> <ul><li>각 테스트 대상 업무에서 부수적인 서비스 호출을 제외하고 중요 서비스 호출만 시나리오에 포함시키면 운영 시 측정한 성능과 테스트 시 측정한 성능이 달라질 수 있다.</li> <li>부하 발생기가 일으키는 서비스 요청 이외에 백엔드에서 수행되는 배치나 후속 작업들을 생략하는 것이다.</li> <li>성능 측정 대상으로서 중요성은 떨어지더라도 정상적인 운영 시 시스템 백엔드에서 일정하게 발생하는 부하가 있다면 성능 테스트 시나리오에 포함해야 한다.</li></ul> <h4 id="_4-3-6-대상-업무와-성능-개선"><a href="#_4-3-6-대상-업무와-성능-개선" class="header-anchor">#</a> 4.3.6 대상 업무와 성능 개선</h4> <ul><li>자바 기반 애플리케이션의 경우 한 개의 업무에서 발생한 메모리 누수나 대량 데이터 조회 문제로도 전체 업무에 성능 저하와 장애가 발생할 수 있다.</li> <li>성능 테스트에서 목표를 만족한 것은 시스템 오픈을 위한 최소한의 기준일 뿐, 안정적으로 운영될 것이라고 담보하지는 못한다.</li></ul></div></div></div></div> <div data-v-52bca676></div></div></div></div> <footer prime="" class="v-footer mt-2 v-sheet theme--light v-footer--padless" style="background:#F3F5F7;"><div class="col col-12"><div class="text-center v-card v-card--flat v-sheet theme--light rounded-0" style="background:#F3F5F7;"><div class="v-card__text"><p>Copyright © 2021 All Right <em>끄적끄적 개발일지</em></p> <p>
          px201226@gmail.com .
          <a href="https://github.com/px201226" target="_blank">GitHub</a>
          .
          <a href="http://px201226.github.io/blog" target="_blank">Blog</a>
          .
        </p></div></div></div></footer></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.70752fd1.js" defer></script><script src="/assets/js/17.4dcf5890.js" defer></script><script src="/assets/js/40.ee500a11.js" defer></script>
  </body>
</html>
